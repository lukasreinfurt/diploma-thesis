\section{Web Service Interface}
\label{design:webservice}

By now, we know that we will use a web service interface for remote communication.
To trigger the basic functionality of the bootware, two operations have to be made public via the web service interface: The deploy and the undeploy operation.
In \autoref{design:context} we also mentioned the \textit{setConfiguration} operation for setting or updating configuration values.

\vspace*{\baselineskip}
\begingroup
	\centering
	\captionsetup{type=table}
	\renewcommand{\arraystretch}{2}
	\begin{tabu}[!htbp]{rcc}

			\multicolumn{1}{c}{\textbf{Operation}}
		& \multicolumn{1}{c}{\textbf{Input}}
		& \multicolumn{1}{c}{\textbf{Success Response}} \\

		\tabucline[0.5pt]{1-3}

			deploy
		& Context
		& Endpoint References \\

			undeploy
		& Endpoint References
		& - \\

			setConfiguration
		& Configuration List
		& - \\

	\end{tabu}
	\caption{Web service operations provided by the local and remote bootware.}
	\label{table:webserviceoperations}
\endgroup

\subsection{deploy}

The deploy operation is called whenever a new payload (e.g. a provisioning engine, or initially, the remote bootware) should be deployed.
As input it takes a context object as described in \autoref{design:context}.
If it was able to successfully deploy the requested payload, it responds with an endpoint reference to the payload.
If the deployment failed, it responds with an error message.

\subsection{undeploy}

The undeploy operation is essentially the reversal of the deploy operation.
As input it takes an endpoint reference to a payload that should be undeploy.
If the undeployment succeeds, it responds with a success message.
If it fails, it responds with an error message.

Unlike the deploy operation it doesn't take a context object as input, but the context is still needed for the undeploy operation, since it contains the information about which plugins have to be used.
This means that we have to store the context object used during each deploy operation so that we can retrieve it later during the corresponding undeploy operation.
This design is intentional and will be described in more detail in \autoref{design:instancestore}.

\subsection{setConfiguration}

The setConfiguration operation is used to transmit or update the default configuration used by plugins.
As input it takes a list of configurations that should be saved.
If the list provided is empty, the default configuration list saved in the bootware will be emptied.
If the list provided is not empty, the default configuration list saved in the bootware will be overwritten by this list.
The configuration can still be overwritten on a per request basis if the context send with the request also contains a configuration.
If the configuration was updated successfully, it responds with a success message.
If the configuration couldn't be updated, it responds with an error message.
